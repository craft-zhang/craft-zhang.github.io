# 车载操作系统的分类
TODO(zhangdanfeng@cloudwalk.com):

## 安全车载操作系统
主流的安全车载操作系统都兼容 OSEK/VDX 和 AUTOSAR Classic Platform 这两类汽车电子软件标准。其中 AUTOSAR Classic Platform 基于 OSEK/VDX 标准，定义了安全车载操作系统的技术规范。

### ERIKA Enterprise
这是第一个开源、免版税、OSEK/VDX 认证的实时操作系统 (RTOS)。Evidence公司基于此提供各种服务：定制、移植、设备驱动程序开发、设计和分析工具。此外，有OSEK、AUTOSAR、基于组件的设计和自动代码生成的服务，构建一个应用程序框架。

### TOPPERS（Toyohashi OPen Platform for Embedded Real-time Systems）
[TOPPERS](https://www.toppers.jp/)（Toyohashi OPen Platform for Embedded Real-time Systems）是一个基于 ITRON 技术规格，开发各种嵌入式操作系统及相关软件，并将其开发成果以开放源代码形式向社会公开，以提高嵌入式系统的设计开发技术，振兴相关产业为目的的工程。另外，通过技术推广，提供各种教材等活动，培养高素质的嵌入式系统开发人员。有AUTOSAR相关项目，车企合作较少看到一个行车记录仪的应用 不是专门的车载

### Trampoline
[Trampoline](https://github.com/TrampolineRTOS/trampoline) 法国南特数字科学实验室 (LS2N)出品，API符合OSEK/VDX OS 和 AUTOSAR OS 4.2 标准

### FreeOSEK
[FreeOSEK](http://opensek.sourceforge.net/) 在其MIT许可下可用于任何目的，战略合作伙伴还会给提供商业许可证和安全认证，合作伙伴很广泛arm、英飞凌、nxp、瑞萨、德州仪器等等等

### SAFERTOS
开源，提供IEC 61508 SIL 3 和 ISO 26262 ASIL D 预认证

### SmartOSEK
浙江大学嵌入式工程中心研发，闭源，通过国际OSEK组织认证，在奇瑞、一汽等单位的项目中有一些应用。

## 智能驾驶操作系统
智能网联汽车的感知融合、决策规划和控制执行功能需要复杂算法的支撑并且需要处理大量的数据，这就要求计算能力与数据通信能力。基于 OSEK/VDX 和 AUTOSAR Classic Platform 软件架构的安全车载操作系统已经不能满足未来自动驾驶汽车的发展需求，AUTOSAR 组织为面向更复杂的域控制器和中央计算平台的集中式电子电气架构（例如ARM微处理器和GPGPU等）推出 AUTOSAR Adaptive Platform。
AUTOSAR Adaptive Platform 定义采用了基于 POSIX 标准的操作系统，可以为支持 POSIX 标准的操作系统及不同的应用需求提供标准化的平台接口和应用服务，主要是为了适应汽车智能化的发展需求。
智能驾驶操作系统主要面向智能驾驶领域，应用于智能驾驶域控制器，该类操作系统对安全性和可靠性要求较高，同时对性能和运算能力的要求也较高。该类操作系统目前在全世界范围内日趋成熟，但生态尚未完备。


### Wind River
VxWorks 2019年通过 TÜV 的 ISO 26262 ASIL-D 认证

### QNX
2019年解决方案符合 ISO 26262:2018 标准，该标准定义了对安全级别达到并包括 ASIL-D 的系统的要求。ETAS 与 BlackBerry QNX

### LynxOS
LynxSecure® Separation Kernel Hypervisor – 使用硬件虚拟化功能将计算资源隔离到严格隔离和独立的虚拟机中，用于 Linux、Windows、RTOS、AUTOSAR 或裸机应用程序。其独特的设计和细粒度的分布式资源控制模型旨在满足最严格的安全和安保问题，并作为 Lynx MOSA.ic™ 框架的基础。


## 智能座舱操作系统
智能座舱操作系统主要为汽车信息娱乐服务以及车内人机交互提供控制平台，是汽车实现座舱智能化与多源信息融合的运行环境，对操作系统的实时性与可靠性要求并不严苛。
主流车型的智能座舱操作主要包括QNX、Linux、Android等，传统智能座舱操作系统中QNX占据了绝大部分份额，近年来，智能座舱的娱乐与信息服务属性越发凸显，开源的Linux以及在手机端拥有大量成熟信息服务资源的Android被众多主机厂青睐，成为后起之秀。此外，国外少量车型还采用了Win CE等作为智能座舱操作系统。

1）基础型操作系统：打造全新底层操作系统和所有系统组件，如系统内核、底层驱 动等，有的还包括虚拟机，如 QNX、Linux、WinCE 等。因打造全新
操作系统需要花费 太大的人力、物力，目前基本没有企业会全新开发底层操作系统。
2）定制型操作系统：在基础型操作系统之上进行深度定制化开发，如修改内核、硬 件驱动、运行时环境、应用程序框架等。典型代表如大众 VW.OS、
特斯拉 Version、Google 车载 Android、华为鸿蒙 OS、AliOS 等，它们已经属于自主研发的独立操作系统。
3）ROM 型汽车操作系统：基于 Linux 或安卓等基础型操作系统进行有限的定制化开发，不涉及系统内核更改，一般只修改更新操作系统自带的应用程
序等。大部分的主 机厂一般都选择开发 ROM 型操作系统，国外主机厂多选用 Linux 作为底层操作系统， 由于国内 Android 应用生态更好，国内自主
品牌和造车新势力大多基于 Android 定制汽 车操作系统，例如比亚迪(297.040, 1.64, 0.56%) DiLink、奇瑞 GKUI、蔚来 NIO OS、小鹏 Xmart OS 等。
4）需要注意的是，超级汽车APP（又称车机互联或手机映射系统），不是完整意义的汽车OS，只是简单地把手机屏幕内容映射到车载中控，通过整合地图、音乐、社交等功能来满足车主需求的APP，如苹果CarPlay、谷歌AndroidAuto、百度CarLife、华为HiCar等。由于汽车座舱为保证系统的稳定性、高安全性，不得不放弃性能，导致手机不论是芯片还是操作系统处理能力都优于汽车座舱，因此，借助手机的丰富功能映射到汽车中控，以满足车主对娱乐的需求。由于容易实现+成本较低，现阶段仍是车主的主流选择。

### QNX、Linux、Android 为三大主要底层 

OS 汽车 OS 由基础软件程序-简单嵌入式-复杂 OS 不断升级。早期嵌入式开发直接在 裸机上写程序，无 OS。随着软件越来越复杂，为了实现多任务执

行，裸机程序不得不 引入中断，而使程序结构复杂难以阅读和维护，因此嵌入式 OS 逐渐形成。但由于普通 8 位或 16 位的 ECU 执行的功能较为单一

，硬件资源有限，无法运行如 QNX、Linux 等 复杂的 OS，常使用一些基础软件程序或简单的嵌入式实时 OS 如 UCOS、FreeRTOS 等。随着 IVI 应用和

接口逐渐复杂，座舱率先使用更为复杂 OS。Linux 和 QNX 只集成学术 定义的 OS 和通讯协议栈；ubuntu 则在 Linux 的基础上添加中间件和桌面环境

；Andrord 和 AliOS 则在 Linux 的基础上集成了中间件、桌面环境和部分应用软件。

全球汽车座舱底层 OS 高度集中。安全和性能是两个矛盾体，座舱域由于其安全等 级较低，现阶段需要较为复杂的 OS 支持大量的应用和接口。参照 

ICVTank 统计数据， 2019 年全球汽车座舱前 3 大底层 OS 市占率：QNX（43%）、Linux（含 Android）（35%）、 WinCE（10%）。由于自动驾驶域还

未真正形成，自动驾驶的 OS 格局仍不明朗，而考虑 到重新开发底层 OS 花费的成本大，自动驾驶 OS 或基于 Linux/QNX 内核发展而来。

#### QNX：非开源&安全实时 

QNX 是一款微内核、嵌入式、非开源、安全实时的操作系统。QNX 系统是由加拿 大 QSSL 公司开发；于 2004 年哈曼国际将 QNX 系统收入囊中；于 

2010 年 BlackBerry 母公司 RIM 又从哈曼国际手中收购 QNX 系统。QNX 是微内核架构，内核一般只有几 十 KB，驱动程序、协议栈、文件系统、应用

程序等都在微内核之外的受内存保护的空 间内运行，可实现组件之间相互独立，避免因程序指针错误造成内核故障。因其内核小 巧，运行速度极快，

具有独特的微内核架构，安全和稳定性高，不易受病毒破坏系统， 是全球首款通过 ISO26262 ASIL-D 安全认证的实时操作系统。因此，QNX 常用于安

全 稳定性要求较高的数字仪表中。

黑莓基于 QNX 为汽车行业开发了不同域的系统平台。黑莓先后为汽车行业开发了 车载信息娱乐系统（QNX CAR Platform for Infotainment）、数字座

舱系统（QNX Platform for Digital Cockpits）和驾驶辅助系统平台（QNX Platform for ADAS）等系统平台，为开 发人员提供了灵活的工具选择，具

有良好的人机交互界面。以 QNX 驾驶辅助系统平台 为例，其硬件支持瑞萨（H3、V3M）、英特尔（Denverton、Appolo Lake）、英伟达 Drive 系统等

芯片平台，还支持毫米波雷达、激光雷达、摄像头、GPS 等传感器。

QNX 凭借其安全、稳定等优势占据市场较高份额。QNX 为非开源系统，具有开发难度大、应用生态较弱等特点，而且需要商业收费。但由于现阶段汽车

嵌入式操作系统 对安全性、稳定性、实时性具有非常严苛的要求，QNX 凭借这些优点仍牢牢占据汽车嵌 入式操作系统市占率第一的位置。根据官网显

示，QNX 已与 45 家以上 OEM 进行合作， 超过 1.75 亿辆汽车使用了 QNX 系统。

#### Linux：开源&功能强大 

Linux 是一款开源、功能更强大的操作系统。Linux 具有内核紧凑高效等特点，可 以充分发挥硬件的性能。它与 QNX 相比最大优势在于开源，具有很

强的定制开发灵活 度。我们通常提的基于 Linux 开发新的操作系统是指基于 Linux Kernel 进一步集成中间 件、桌面环境和部分应用软件。Linux 功

能较 QNX 更强大，组件也更为复杂，因此 Linux 常用于支持更多应用和接口的信息娱乐系统中。协会或联盟致力于将开源 Linux 操作系 统推广至汽

车领域中，典型代表如 AGL、GENIVI。

AGL 开源项目致力于建立一个基于 Linux 的联网汽车内部使用的开源平台。2014 年，Linux 基金会发布了开源 AGL（Automotive Grade Linux）规范 

1.0 版本，它是首个 开放式车载信息娱乐（IVI）软件规范。其中 70%的代码（包括操作系统、中间件和应用 程序框架）已编写完成，车企可以专注于

剩下的 30%个性化定制开发，以保证不同品牌 的差异化，而且 AGL 不收取任何许可费。随着自动驾驶的发展，AGL 已经不只局限于 IVI 领域，未来将

向仪表盘、座舱域、自动驾驶等领域延伸，现阶段它仍未通过 ISO 26262 标准。从其整车企业成员来看，AGL 早期主要为丰田、本田、日产等日系厂商

，随着 2019 年大众、现代汽车的加入，AGL 势力规模逐渐壮大。截至 2020 年 3 月，国内已有 中国移动、上汽集团(20.650, 0.01, 0.05%)、德赛西

威(125.190, 11.38, 10.00%)、中科创达(153.950, 10.75, 7.51%)等公司加入了 AGL，成员总数超过 150 个。

GENIVI 的宗旨是实现对车载信息娱乐系统开源开发平台的广泛普及。2009 年成 立的GENIVI联盟一直致力于为汽车行业提供各类开源的车载信息娱乐系

统技术解决方 案。GENIVI 基于 Linux 提供开源软件，汽车车企通过选择并整合不同的应用和中间件 实现差异化的车载信息娱乐产品，缩短开发周期

，从而减少汽车生产商的成本。其中 80% 的软件在消费电子/通信行业中已经被开发，可不加修改直接应用，仅 15%必须进行调整 才能适用于特殊的汽

车参数，仅 5%仍需自己开发。GENIVI 将继续开发剩余 5%的代码， 并开放给所有汽车厂商。目前，联盟的成员包括 170 多家汽车生产商和供应商。

3.3. Android：Linux 的发行版本 

Android 是发行版本的 Linux，系统复杂，功能强大。Android 是由 Google 公司和 开放手机联盟基于 Linux 开发的操作系统。Android 被称为基于 

Linux 开发的最成功的 产品之一，应用生态最为丰富，主要应用于移动设备，因此，在国内车载 IVI 系统常基 于 Android 开发。Android 的主要优

点有：1）开源，对中低端 OS 开发商具有很强吸引 力；2）灵活，可以根据自身需要对原生 Android 进行定制化改造；3）可移植性强，Android 手机

上的 APP 不需要经过大的修改就可以应用在车机上，有利于国内互联网厂商切入 汽车领域，快速建立起车载软件生态。

Android 的缺点主要有：1）安全性、稳定性差， 系统漏洞带来较高风险，技术维护成本高；2）过度依赖于 Google。Android 凭借国内丰富的应用生

态切入汽车 IVI 系统。虽然安全性、稳定性不足， 但由于车载信息娱乐系统对安全性要求相对较低，Android 仍然凭借其上述优点在国内 车载信息娱

乐系统领域占据主流地位。尤其是各大互联网巨头、自主品牌、造车新势力 纷纷基于 Android 进行定制化改造，推出了自己的汽车操作系统，如阿里 

AliOS、百度 小度车载 OS、比亚迪 DiLink、蔚来 NIO OS、小鹏 Xmart OS 等。

#### WinCE：逐步推出市场 
WinCE 是微软 1996 年发布的嵌入式操作系统，主要应用于车载主机、车载导航和 车载娱乐系统。但是随着 Linux 和 Android 的冲击，现阶段开发者 和应用者已非常少了， 微软计划于 2021 年 3 月终止对其服务，将逐步退出汽车操作系统市场。
